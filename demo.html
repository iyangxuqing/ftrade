<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<input id="file1" type="file" name="file" />
	<button onclick="doUploadImage()">上传</button>
	<script type="text/javascript">
		var data = {
		            //OSSAccessKeyId:'',//需要根据自己的bucket填写 详情请见oss api
		            //policy:'',
		            //signature:'',
		            success_action_status:'201',
		            key:'img/111/${filename}'
		        };
		var url = 'http://yimage.oss-cn-shanghai.aliyuncs.com';

		        function doUploadImage(){
		        	alert(1);
		        	var oMyForm = new FormData();

		        	for(var field_name in data){
		        		oMyForm.append(field_name,data[field_name]);
		        	}

		        	oMyForm.append("file", document.querySelector("#file1").files[0]);

		        	var oReq = new XMLHttpRequest();
		        //上传进度监听
		        oReq.upload.onprogress = function (e) {
		        	if(e.type=='progress'){
		        		var percent = Math.round(e.loaded/e.total*100,2)+'%';
		                //$('#progress').html(percent);//显示进度的容器 自行修改
		            }
		        };
		        //上传结果
		        oReq.onreadystatechange = function(e){
		        	if(oReq.readyState == 4){
		                if(oReq.status==201)//这里如果成功返回的是 success_action_status设置的值
		                	alert('成功');
		                else
		                	alert('失败');
		            }
		        };
		        oReq.open("POST", url);
		        oReq.send(oMyForm);
		    }
		// doUploadImage(glo_image_upload_url,glo_image_data);		
	</script>
</body>
</html>